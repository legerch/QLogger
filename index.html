<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QLogger: QLogger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<!-- Custom "doxygen-awesome" extensions -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QLogger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">QLogger </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> <a href="https://github.com/legerch/QLogger"><b>QLogger</b></a> is made to be compatible with <a href="https://doc.qt.io/qt-6/qtlogging.html"><em>Qt framework logs</em></a> management, this library provide an easy (and <em>thread-safe</em>) way to use multiple sinks behaviour. <br  />
</p>
<dl class="section remark"><dt>Remarks</dt><dd>Latest development/pull requests will be committed into <code>main</code> branch. <br  />
 Each stable release have their dedicated branch:<ul>
<li><code>1.0.x</code>: branch <code>dev/1.0</code></li>
<li><code>1.1.x</code>: branch <code>dev/1.1</code></li>
<li>etc...</li>
</ul>
</dd></dl>
<p><b>Table of contents:</b></p><ul>
<li><a class="el" href="#autotoc_md1-requirements">1. Requirements</a><ul>
<li><a class="el" href="#autotoc_md11-c-standards">1.1. C++ Standards</a></li>
<li><a class="el" href="#autotoc_md12-dependencies">1.2. Dependencies</a></li>
</ul>
</li>
<li><a class="el" href="#autotoc_md2-how-to-build">2. How to build</a></li>
<li><a class="el" href="#autotoc_md3-how-to-use">3. How to use</a><ul>
<li><a class="el" href="#autotoc_md31-initialization">3.1. Initialization</a></li>
<li><a class="el" href="#autotoc_md32-desinitialization">3.2. Desinitialization</a></li>
<li><a class="el" href="#autotoc_md33-customization">3.3. Customization</a><ul>
<li><a class="el" href="#autotoc_md331-log-format">3.3.1. Log format</a></li>
<li><a class="el" href="#autotoc_md332-log-level">3.3.2. Log level</a></li>
</ul>
</li>
<li><a class="el" href="#autotoc_md34-library-version">3.4. Library version</a><ul>
<li><a class="el" href="#autotoc_md341-compilation-time">3.4.1. Compilation time</a></li>
<li><a class="el" href="#autotoc_md342-runtime">3.4.2. Runtime</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="#autotoc_md4-documentation">4. Documentation</a></li>
<li><a class="el" href="#autotoc_md5-library-details">5. Library details</a><ul>
<li><a class="el" href="#autotoc_md51-why-another-log-library-">5.1. Why another log library ?</a></li>
<li><a class="el" href="#autotoc_md52-implementation">5.2. Implementation</a></li>
</ul>
</li>
<li><a class="el" href="#autotoc_md6-license">6. License</a></li>
<li><a class="el" href="#autotoc_md7-ressources">7. Ressources</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1-requirements"></a>
1. Requirements</h1>
<h2><a class="anchor" id="autotoc_md11-c-standards"></a>
1.1. C++ Standards</h2>
<p>This library requires at least <b>C++ 11</b> standard (see <a class="el" href="#autotoc_md52-implementation">implementation section</a> for more details)</p>
<h2><a class="anchor" id="autotoc_md12-dependencies"></a>
1.2. Dependencies</h2>
<p>Below, list of required dependencies:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Dependencies   </th><th class="markdownTableHeadCenter">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a href="https://www.qt.io/">Qt</a>   </td><td class="markdownTableBodyCenter">Library built with <b>Qt framework</b> and compatible with series <code>5.15.x</code> and <code>6.x</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2-how-to-build"></a>
2. How to build</h1>
<p>This library can be use as an embedded library in a subdirectory of your project (like a git submodule for example):</p><ol type="1">
<li>In the <b>root</b> CMakeLists, add instructions: <div class="fragment"><div class="line">add_subdirectory(qlogger) # Or if library is put in a folder &quot;dependencies&quot; : add_subdirectory(dependencies/qlogger)</div>
</div><!-- fragment --></li>
</ol>
<ol type="1">
<li>In the <b>application</b> CMakeLists, add instructions : <div class="fragment"><div class="line"># Link QLogger library</div>
<div class="line">target_link_libraries(${PROJECT_NAME} PRIVATE qlogger)</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md3-how-to-use"></a>
3. How to use</h1>
<h2><a class="anchor" id="autotoc_md31-initialization"></a>
3.1. Initialization</h2>
<p>This library only have to be initialized in the <code>main</code> method of the application, then all calls to Qt logs methods (<code>qDebug()</code>, <code>qInfo()</code>, <code>qWarning()</code>, etc...) of the application and used libraries will be redirected to <em>QLogger</em>. Multiple sinks behaviour are available:</p><ul>
<li><b>File rotating sink</b> via <code><a class="el" href="class_q_logger_1_1_q_logger_factory.html#a805c2c7fe35c1edd83619373461fd9b2" title="Use to configure rotating file log sink.">QLogger::QLoggerFactory::initLoggerRotating()</a></code></li>
<li><b>Daily sink</b> via <code><a class="el" href="class_q_logger_1_1_q_logger_factory.html#a6869e81794b39956cc0f1959da12e3db" title="Use to configure daily file log sink.">QLogger::QLoggerFactory::initLoggerDaily()</a></code></li>
</ul>
<p><em>Example:</em> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;qlogger/qloggerfactory.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Set logs */</span></div>
<div class="line">    <a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#ad2cdc893013cde67987159166a3117cc">QLogger::QLoggerFactory::instance</a>().<a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#a805c2c7fe35c1edd83619373461fd9b2">initLoggerRotating</a>(QFileInfo(<span class="stringliteral">&quot;logs/log.txt&quot;</span>), 3, 1024 * 1024 * 5, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Manage application properties */</span></div>
<div class="line">    QApplication app(argc, argv);</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> app.exec();</div>
<div class="line">}</div>
<div class="ttc" id="aclass_q_logger_1_1_q_logger_factory_html_a805c2c7fe35c1edd83619373461fd9b2"><div class="ttname"><a href="class_q_logger_1_1_q_logger_factory.html#a805c2c7fe35c1edd83619373461fd9b2">QLogger::QLoggerFactory::initLoggerRotating</a></div><div class="ttdeci">void initLoggerRotating(const QFileInfo &amp;file, int maxFiles, qint64 maxSize, bool enableConsole)</div><div class="ttdoc">Use to configure rotating file log sink.</div><div class="ttdef"><b>Definition</b> qloggerfactory.cpp:113</div></div>
<div class="ttc" id="aclass_q_logger_1_1_q_logger_factory_html_ad2cdc893013cde67987159166a3117cc"><div class="ttname"><a href="class_q_logger_1_1_q_logger_factory.html#ad2cdc893013cde67987159166a3117cc">QLogger::QLoggerFactory::instance</a></div><div class="ttdeci">static QLoggerFactory &amp; instance()</div><div class="ttdoc">Use to get current unique instance of QLoggerFactory.</div><div class="ttdef"><b>Definition</b> qloggerfactory.cpp:155</div></div>
</div><!-- fragment --><p> This will configure <b>QLogger</b> to:</p><ul>
<li>Use <code>logs/log.txt</code> as main file (once rotated, generated files will be: <code>logs/log1.txt</code> and <code>logs/log2.txt</code>)</li>
<li>Number of logs files limited to <b>3</b></li>
<li>Log file max size limited to <b>5 megabytes (5Mb)</b> (<em>1 Kb = 1024 bytes</em>, <em>1Mb = 1024 * 1024 bytes</em>)</li>
<li>All logs messages will also be redirected to console (useful during development phase)</li>
</ul>
<h2><a class="anchor" id="autotoc_md32-desinitialization"></a>
3.2. Desinitialization</h2>
<p><b>QLogger</b> library will properly destruct (and close) all used ressources automatically when application is closed. But if user need to quit <b>QLogger</b> manually, just use: </p><div class="fragment"><div class="line"><a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#ad2cdc893013cde67987159166a3117cc">QLogger::QLoggerFactory::instance</a>().<a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#a1859e12a12ea9234ac215e14d50a0bbb">desinit</a>();</div>
<div class="ttc" id="aclass_q_logger_1_1_q_logger_factory_html_a1859e12a12ea9234ac215e14d50a0bbb"><div class="ttname"><a href="class_q_logger_1_1_q_logger_factory.html#a1859e12a12ea9234ac215e14d50a0bbb">QLogger::QLoggerFactory::desinit</a></div><div class="ttdeci">void desinit()</div><div class="ttdoc">Use to release and close all used ressources.</div><div class="ttdef"><b>Definition</b> qloggerfactory.cpp:126</div></div>
</div><!-- fragment --><p>In this case, default Qt logger will be restablished. User can still use his own log behaviour with <a href="https://doc.qt.io/qt-5/qtglobal.html#qInstallMessageHandler"><code>qInstallMessageHandler()</code></a> method (<b>QLogger</b> must have been desinitialized !)</p>
<dl class="section remark"><dt>Remarks</dt><dd>If log sink must be changed while one has already been initialized, caller don't need to manually call <code>desinit()</code> method, each sink init method will properly take care of this.</dd></dl>
<h2><a class="anchor" id="autotoc_md33-customization"></a>
3.3. Customization</h2>
<h3><a class="anchor" id="autotoc_md331-log-format"></a>
3.3.1. Log format</h3>
<p>By default, log message will be formatted as below, depending of type of build:</p><ul>
<li><b>Release:</b> <code>[utc-date][type-log] log-msg</code></li>
<li><b>Debug:</b> <code>[utc-date][type-log] log-msg (cpp-file:cpp-line, cpp-function)</code></li>
</ul>
<p>If source file informations must appears on logs even on <b>release</b> mode, please use the associated macro in your main <em>CMakefile</em>: <a href="https://doc.qt.io/qt-6/qmessagelogcontext.html"><code>QT_MESSAGELOGCONTEXT</code></a>.</p>
<p>So for example, when using: </p><div class="fragment"><div class="line"><span class="keyword">const</span> QString strValue = <span class="stringliteral">&quot;nine&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> value = 9;</div>
<div class="line"> </div>
<div class="line">qDebug() &lt;&lt; <span class="stringliteral">&quot;My value is:&quot;</span> &lt;&lt; myValue;</div>
<div class="line">qDebug(<span class="stringliteral">&quot;String [%s] converted as number is [%d]&quot;</span>, qUtf8Printable(strValue), value);</div>
</div><!-- fragment --><p>This will log: </p><div class="fragment"><div class="line">[2023-07-09T13:36:09.245Z][debug] My value is: 9 (mainwindow.cpp:14, onMyCustomBtnClicked)</div>
<div class="line">[2023-07-09T13:36:09.246Z][debug] String [nine] converted as number is [9] (mainwindow.cpp:15, onMyCustomBtnClicked)</div>
</div><!-- fragment --><p>Format log message can also be customized by using a custom <code><a class="el" href="class_q_logger_1_1_log_formatter.html" title="Use to format log.">QLogger::LogFormatter</a></code> method, here an example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;qlogger/qloggerfactory.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line"><span class="comment">/* Macro definitions         */</span></div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line"><span class="preprocessor">#define APP_LOG_FILE            &quot;logs/log.txt&quot;</span></div>
<div class="line"><span class="preprocessor">#define APP_LOG_NB_FILES        3</span></div>
<div class="line"><span class="preprocessor">#define APP_LOG_SIZE            (1024 * 1024 * 5) </span><span class="comment">// Equals 5 megabytes (Mb)</span></div>
<div class="line"><span class="preprocessor">#define APP_LOG_ENABLE_CONSOLE  true</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line"><span class="comment">/* Custom log formatter      */</span></div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line">QString logFormatter(<span class="keyword">const</span> <a class="code hl_class" href="class_q_logger_1_1_log_entry.html">QLogger::LogEntry</a> &amp;log)</div>
<div class="line">{</div>
<div class="line">    QString fmt = QString(<span class="stringliteral">&quot;[%1][%2] %3&quot;</span>).arg(</div>
<div class="line">        QDateTime::currentDateTimeUtc().toString(Qt::ISODateWithMs),</div>
<div class="line">        log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#a3f7574269d4489dc6d3c519e4a74ab2c">getTypeString</a>(),</div>
<div class="line">        log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#a74636241f09fea5b6046e1ab89fde7ac">getMsg</a>()</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Can we add context informations ? */</span></div>
<div class="line">    <span class="keywordflow">if</span>(log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#a7aed827d09b2eec9a6dda0f5bdc46d96">contextIsAvailable</a>()){</div>
<div class="line">        fmt += QString(<span class="stringliteral">&quot; (%1:%2, %3)&quot;</span>)</div>
<div class="line">                   .arg(log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#ad9225566f2bbf28f8f83e5e70837013b">getCtxFile</a>().fileName())</div>
<div class="line">                   .arg(log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#aa94f19c5d8cc204aa525b84f22d28549">getCtxLine</a>())</div>
<div class="line">                   .arg(log.<a class="code hl_function" href="class_q_logger_1_1_log_entry.html#a8252d9d587c6eec6c56825cc3e16ef89">getCtxFctName</a>());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Terminate log line */</span></div>
<div class="line">    fmt += <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> fmt;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line"><span class="comment">/* Main method               */</span></div>
<div class="line"><span class="comment">/*****************************/</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Set logs */</span></div>
<div class="line">    <a class="code hl_function" href="class_q_logger_1_1_log_formatter.html#ae7b572a49ab5c3ae5f41827ff57852a4">QLogger::LogFormatter::setCustomFormat</a>(logFormatter);</div>
<div class="line">    <a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#ad2cdc893013cde67987159166a3117cc">QLogger::QLoggerFactory::instance</a>().<a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#a805c2c7fe35c1edd83619373461fd9b2">initLoggerRotating</a>(QFileInfo(APP_LOG_FILE), APP_LOG_NB_FILES, APP_LOG_SIZE, APP_LOG_ENABLE_CONSOLE);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Manage application properties */</span></div>
<div class="line">    QApplication app(argc, argv);</div>
<div class="line"> </div>
<div class="line">    MainWindow window;</div>
<div class="line">    window.show();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> app.exec();</div>
<div class="line">}</div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html">QLogger::LogEntry</a></div><div class="ttdoc">Used to store all log entry informations.</div><div class="ttdef"><b>Definition</b> logentry.h:13</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_a3f7574269d4489dc6d3c519e4a74ab2c"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#a3f7574269d4489dc6d3c519e4a74ab2c">QLogger::LogEntry::getTypeString</a></div><div class="ttdeci">QString getTypeString() const</div><div class="ttdoc">Get string type.</div><div class="ttdef"><b>Definition</b> logentry.cpp:88</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_a74636241f09fea5b6046e1ab89fde7ac"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#a74636241f09fea5b6046e1ab89fde7ac">QLogger::LogEntry::getMsg</a></div><div class="ttdeci">const QString &amp; getMsg() const</div><div class="ttdoc">Get log message.</div><div class="ttdef"><b>Definition</b> logentry.cpp:221</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_a7aed827d09b2eec9a6dda0f5bdc46d96"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#a7aed827d09b2eec9a6dda0f5bdc46d96">QLogger::LogEntry::contextIsAvailable</a></div><div class="ttdeci">bool contextIsAvailable() const</div><div class="ttdoc">Use to know if context informations are available.</div><div class="ttdef"><b>Definition</b> logentry.cpp:110</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_a8252d9d587c6eec6c56825cc3e16ef89"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#a8252d9d587c6eec6c56825cc3e16ef89">QLogger::LogEntry::getCtxFctName</a></div><div class="ttdeci">QString getCtxFctName() const</div><div class="ttdoc">Get function name.</div><div class="ttdef"><b>Definition</b> logentry.cpp:200</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_aa94f19c5d8cc204aa525b84f22d28549"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#aa94f19c5d8cc204aa525b84f22d28549">QLogger::LogEntry::getCtxLine</a></div><div class="ttdeci">int getCtxLine() const</div><div class="ttdoc">Get line of source code associated to log entry.</div><div class="ttdef"><b>Definition</b> logentry.cpp:146</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_entry_html_ad9225566f2bbf28f8f83e5e70837013b"><div class="ttname"><a href="class_q_logger_1_1_log_entry.html#ad9225566f2bbf28f8f83e5e70837013b">QLogger::LogEntry::getCtxFile</a></div><div class="ttdeci">const QFileInfo &amp; getCtxFile() const</div><div class="ttdoc">Get file of source code associated to log entry.</div><div class="ttdef"><b>Definition</b> logentry.cpp:128</div></div>
<div class="ttc" id="aclass_q_logger_1_1_log_formatter_html_ae7b572a49ab5c3ae5f41827ff57852a4"><div class="ttname"><a href="class_q_logger_1_1_log_formatter.html#ae7b572a49ab5c3ae5f41827ff57852a4">QLogger::LogFormatter::setCustomFormat</a></div><div class="ttdeci">static void setCustomFormat(CbFormatter formatter)</div><div class="ttdoc">Register a custom formatter.</div><div class="ttdef"><b>Definition</b> logformatter.cpp:79</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md332-log-level"></a>
3.3.2. Log level</h3>
<p>User can also configure whether or not all messages should be logged. By default, all messages are logged but that can be changed by choosing minimum level to use (see <a href="https://doc.qt.io/qt-6/qtlogging.html#QtMsgType-enum">Qt log level enum doc</a>): </p><div class="fragment"><div class="line"><a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#ad2cdc893013cde67987159166a3117cc">QLogger::QLoggerFactory::instance</a>().<a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#a15e8a382ad78ce5f339d10accf525a31">setLevel</a>(QtWarningMsg);</div>
<div class="ttc" id="aclass_q_logger_1_1_q_logger_factory_html_a15e8a382ad78ce5f339d10accf525a31"><div class="ttname"><a href="class_q_logger_1_1_q_logger_factory.html#a15e8a382ad78ce5f339d10accf525a31">QLogger::QLoggerFactory::setLevel</a></div><div class="ttdeci">void setLevel(QtMsgType idType)</div><div class="ttdoc">Use to set minimum log level to use.</div><div class="ttdef"><b>Definition</b> qloggerfactory.cpp:141</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>This example will set logger to only manage message of level: <code>QtWarningMsg</code>, <code>QtCriticalMsg</code> and <code>QtFatalMsg</code></dd></dl>
<h2><a class="anchor" id="autotoc_md34-library-version"></a>
3.4. Library version</h2>
<h3><a class="anchor" id="autotoc_md341-compilation-time"></a>
3.4.1. Compilation time</h3>
<p>In order to easily check at compilation time library version (to manage compatibility between multiple versions for example), macro <code>QLOGGER_VERSION_ENCODE</code> (defined inside <em>qloggerglobal.h</em> file) can be used: </p><div class="fragment"><div class="line"><span class="preprocessor">#if QLOGGER_VERSION &gt;= QLOGGER_VERSION_ENCODE(2,0,0)</span></div>
<div class="line">    <span class="comment">// Do stuff for version 2.0.0 or higher</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">    <span class="comment">// Do stuff for earlier versions</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md342-runtime"></a>
3.4.2. Runtime</h3>
<p>At runtime, it is recommended to use the static method: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;qlogger/qloggerfactory.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QVersionNumber &amp;qloggerSemver = <a class="code hl_function" href="class_q_logger_1_1_q_logger_factory.html#add2dcc993d9f82bc500d4c99780165fd">QLogger::QLoggerFactory::getLibraryVersion</a>();</div>
<div class="ttc" id="aclass_q_logger_1_1_q_logger_factory_html_add2dcc993d9f82bc500d4c99780165fd"><div class="ttname"><a href="class_q_logger_1_1_q_logger_factory.html#add2dcc993d9f82bc500d4c99780165fd">QLogger::QLoggerFactory::getLibraryVersion</a></div><div class="ttdeci">static const QVersionNumber &amp; getLibraryVersion()</div><div class="ttdoc">Retrieve library semantic version at runtime.</div><div class="ttdef"><b>Definition</b> qloggerfactory.cpp:174</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4-documentation"></a>
4. Documentation</h1>
<p>All classes/methods has been documented with <a href="https://www.doxygen.nl/">Doxygen</a> utility and automatically generated at <a href="https://legerch.github.io/QLogger/">online website documentation</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This repository contains two kinds of documentation:<ul>
<li><b>Public API:</b> Available via <a href="https://legerch.github.io/QLogger/">online website documentation</a> or locally via Doxyfile <code>docs/fragments/Doxyfile-public-api.in</code></li>
<li><b>Internal:</b> Available locally only via <code>docs/fragments/Doxyfile-internal.in</code></li>
</ul>
</dd></dl>
<p>To generate documentation locally, we can use: </p><div class="fragment"><div class="line"># Run documentation generation</div>
<div class="line">doxygen ./Doxyfile-name</div>
<div class="line"> </div>
<div class="line"># Under Windows OS, maybe doxygen is not added to the $PATH</div>
<div class="line">&quot;C:\Program Files\doxygen\bin\doxygen.exe&quot; ./Doxyfile-name</div>
</div><!-- fragment --> <dl class="section remark"><dt>Remarks</dt><dd>You can also load the <em>Doxyfile</em> into <em>Doxywizard</em> (Doxygen GUI) and run generation.</dd></dl>
<h1><a class="anchor" id="autotoc_md5-library-details"></a>
5. Library details</h1>
<h2><a class="anchor" id="autotoc_md51-why-another-log-library-"></a>
5.1. Why another log library ?</h2>
<p>We already have many good C++ logs libraries outside, so why to create a new one ? Since many of my custom application are built with Qt framework, I thought that having Qt framework as a dependency was already enough and didnt' want to use another just for logging. Besides, alternatives C++ logs libraries doesn't behave properly when used inside a library (<code>.dll</code> under <b>Windows</b>, <code>.so</code> under <b>Linux</b>) but Qt log framework allow such usage.</p>
<p>Qt log module allow to easily add our custom log behaviour throught <a href="https://doc.qt.io/qt-5/qtglobal.html#qInstallMessageHandler"><code>qInstallMessageHandler()</code></a>. This library is just build around that extension feature.</p>
<h2><a class="anchor" id="autotoc_md52-implementation"></a>
5.2. Implementation</h2>
<p>This library use the <a href="https://refactoring.guru/design-patterns/singleton">singleton pattern</a> to manage <b>QLoggerFactory</b> instance. This singleton was implemented using <a href="https://laristra.github.io/flecsi/src/developer-guide/patterns/meyers_singleton.html">Meyer's Singleton</a> pattern, this implementation use static variable initialization to ensure thread-safety at initialization. This doesn't ensure your singleton to be thread-safe... only his <em>initialization</em> and <em>desininitialization</em> are ! <br  />
 Note that (at least !) a <b>C++11</b> compiler is required (<b>C++11</b> added requirement for static variable initialization to be thread-safe). </p><blockquote class="doxtable">
<p>&zwj;For more informations about <b>Meyer's Singleton</b>, see below:</p><ul>
<li><a href="https://codereview.stackexchange.com/questions/197486/singleton-class-and-correct-way-to-access-it-in-c">Stackexchange - Singleton class and correct way to access it in C++</a></li>
<li><a href="https://stackoverflow.com/questions/17712001/how-is-meyers-implementation-of-a-singleton-actually-a-singleton">Stackoverflow - How is Meyers' implementation of a Singleton actually a Singleton</a> </li>
</ul>
</blockquote>
<p>Then, library thread-safety is ensured by using a mutex whenever a log message is received (to prevent from thread-race issues when trying to write to log to file for example).</p>
<h1><a class="anchor" id="autotoc_md6-license"></a>
6. License</h1>
<p>This library is licensed under [MIT license][repo-license].</p>
<h1><a class="anchor" id="autotoc_md7-ressources"></a>
7. Ressources</h1>
<ul>
<li>Qt ressources<ul>
<li><a href="https://doc.qt.io/qt-6/qtlogging.html">Qt logs module</a></li>
<li><a href="https://doc.qt.io/qt-5/qtglobal.html#qInstallMessageHandler">Qt log custom handler</a></li>
</ul>
</li>
<li>Singleton pattern<ul>
<li><a href="https://refactoring.guru/design-patterns/singleton">RefactoringGuru - Singleton pattern</a></li>
<li><a href="https://laristra.github.io/flecsi/src/developer-guide/patterns/meyers_singleton.html">Meyerâ€™s Singleton</a></li>
<li><a href="https://codereview.stackexchange.com/questions/197486/singleton-class-and-correct-way-to-access-it-in-c">Stackexchange - Singleton class and correct way to access it in C++</a></li>
<li><a href="https://stackoverflow.com/questions/17712001/how-is-meyers-implementation-of-a-singleton-actually-a-singleton">Stackoverflow - How is Meyers' implementation of a Singleton actually a Singleton</a></li>
</ul>
</li>
<li>Documentation utility<ul>
<li><a href="https://www.doxygen.nl/">Doxygen</a></li>
</ul>
</li>
<li>C++ logs libraries:<ul>
<li><a href="https://github.com/gabime/spdlog">sdplog</a></li>
<li><a href="https://github.com/SergiusTheBest/plog">plog</a></li>
<li><a href="https://github.com/google/glog">glog</a></li>
<li><a href="https://github.com/abumq/easyloggingpp">easyloggingcpp</a></li>
<li><a href="https://github.com/log4cplus/log4cplus">log4cplus</a></li>
<li><a href="https://github.com/emilk/loguru">loguru</a> </li>
</ul>
</li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 6 2024 10:00:08 for QLogger by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
